import{u as P,r as o,c as _,w as a,a as t,b as A,i as D,o as y,d as l,e as r,f as R,g as T,h as g,t as h}from"./index-CDzqZl3V.js";const j={class:"d-flex flex-column gap-4 mt-6"},F={class:"text-center"},$={__name:"LoginForm",setup(M){const x=A(),w=P(),V=D("notify"),b=o(null),u=o(!1),m=o(""),c=o(""),d=o(!1),v=o(!1),i=o(""),p={required:s=>!!s||"This field is required",min:s=>s.length>=6||"Password must be at least 6 characters"},k=async()=>{if(u.value){v.value=!0,i.value="";try{await w.login({username:m.value,password:c.value}),V("Login successful!"),x.push("/profile"),window.location.reload()}catch(s){i.value=s.message||"Login failed"}finally{v.value=!1}}};return(s,e)=>{const L=t("v-card-title"),f=t("v-text-field"),S=t("v-alert"),q=t("v-btn"),C=t("router-link"),N=t("v-form"),U=t("v-card-text"),B=t("v-card");return y(),_(B,{class:"mx-auto my-12","max-width":"500"},{default:a(()=>[l(L,{class:"text-h5 text-center py-4"},{default:a(()=>e[4]||(e[4]=[r(" Login to Your Account ")])),_:1}),l(U,null,{default:a(()=>[l(N,{ref_key:"form",ref:b,modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=n=>u.value=n),onSubmit:R(k,["prevent"])},{default:a(()=>[l(f,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=n=>m.value=n),label:"Username",rules:[p.required]},null,8,["modelValue","rules"]),l(f,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=n=>c.value=n),label:"Password","append-icon":d.value?"mdi-eye":"mdi-eye-off",type:d.value?"text":"password",rules:[p.required,p.min],"onClick:append":e[2]||(e[2]=n=>d.value=!d.value)},null,8,["modelValue","append-icon","type","rules"]),i.value?(y(),_(S,{key:0,type:"error",class:"mt-4"},{default:a(()=>[r(h(i.value),1)]),_:1})):T("",!0),g("div",j,[l(q,{color:"primary",type:"submit",block:"",loading:v.value,disabled:!u.value},{default:a(()=>e[5]||(e[5]=[r(" Login ")])),_:1},8,["loading","disabled"]),g("div",F,[e[7]||(e[7]=r(" Don't have an account? ")),l(C,{to:"/register"},{default:a(()=>e[6]||(e[6]=[r("Register")])),_:1})])])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};export{$ as default};

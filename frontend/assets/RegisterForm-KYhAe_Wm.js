import{u as D,r as t,c as g,w as r,a as s,b as O,i as z,o as N,d as a,e as d,f as G,g as H,h as k,t as I}from"./index-CDzqZl3V.js";const J={class:"d-flex flex-column gap-4 mt-6"},K={class:"text-center"},X={__name:"RegisterForm",setup(Q){const q=O(),C=D(),U=z("notify"),P=t(null),i=t(!1),c=t(""),V=t(""),y=t(""),_=t(""),w=t(3),R=[{title:"Provider",value:2},{title:"Customer",value:3}],m=t(""),b=t(""),v=t(!1),p=t(!1),x=t(!1),f=t(""),o={required:u=>!!u||"This field is required",email:u=>/.+@.+\..+/.test(u)||"Email must be valid",min:u=>u.length>=6||"Password must be at least 6 characters"},S=()=>m.value===b.value||"Passwords do not match",A=async()=>{if(i.value){x.value=!0,f.value="";try{await C.register({username:c.value,first_name:V.value,last_name:y.value,email:_.value,role:Number(w.value),password:m.value}),U("Registration successful!"),q.push({name:"profile"}),window.location.reload()}catch(u){f.value=u.message||"Registration failed"}finally{x.value=!1}}};return(u,e)=>{const B=s("v-card-title"),n=s("v-text-field"),T=s("v-select"),E=s("v-alert"),F=s("v-btn"),L=s("router-link"),M=s("v-form"),$=s("v-card-text"),j=s("v-card");return N(),g(j,{class:"mx-auto my-12","max-width":"500"},{default:r(()=>[a(B,{class:"text-h5 text-center py-4"},{default:r(()=>e[10]||(e[10]=[d(" Create New Account ")])),_:1}),a($,null,{default:r(()=>[a(M,{ref_key:"form",ref:P,modelValue:i.value,"onUpdate:modelValue":e[9]||(e[9]=l=>i.value=l),onSubmit:G(A,["prevent"])},{default:r(()=>[a(n,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=l=>c.value=l),label:"Username",rules:[o.required]},null,8,["modelValue","rules"]),a(n,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=l=>V.value=l),label:"First Name",rules:[o.required]},null,8,["modelValue","rules"]),a(n,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),label:"Last Name",rules:[o.required]},null,8,["modelValue","rules"]),a(n,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),label:"Email",type:"email",rules:[o.required,o.email]},null,8,["modelValue","rules"]),a(T,{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=l=>w.value=l),label:"Account Type",items:R,rules:[o.required]},null,8,["modelValue","rules"]),a(n,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=l=>m.value=l),label:"Password","append-icon":v.value?"mdi-eye":"mdi-eye-off",type:v.value?"text":"password",rules:[o.required,o.min],"onClick:append":e[6]||(e[6]=l=>v.value=!v.value)},null,8,["modelValue","append-icon","type","rules"]),a(n,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=l=>b.value=l),label:"Confirm Password","append-icon":p.value?"mdi-eye":"mdi-eye-off",type:p.value?"text":"password",rules:[o.required,S],"onClick:append":e[8]||(e[8]=l=>p.value=!p.value)},null,8,["modelValue","append-icon","type","rules"]),f.value?(N(),g(E,{key:0,type:"error",class:"mt-4"},{default:r(()=>[d(I(f.value),1)]),_:1})):H("",!0),k("div",J,[a(F,{color:"primary",type:"submit",block:"",loading:x.value,disabled:!i.value},{default:r(()=>e[11]||(e[11]=[d(" Register ")])),_:1},8,["loading","disabled"]),k("div",K,[e[13]||(e[13]=d(" Already have an account? ")),a(L,{to:"/login"},{default:r(()=>e[12]||(e[12]=[d("Login")])),_:1})])])]),_:1},8,["modelValue"])]),_:1})]),_:1})}}};export{X as default};
